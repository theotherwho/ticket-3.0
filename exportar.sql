--------------------------------------------------------
--  Arquivo criado - Sexta-feira-Novembro-22-2019   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Table CATEGORIA
--------------------------------------------------------

  CREATE TABLE "HR"."CATEGORIA" 
   (	"ID_CATEGORIA" NUMBER(*,0), 
	"DESCRICAO" VARCHAR2(40 BYTE)
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table ORDEM_SERVICO
--------------------------------------------------------

  CREATE TABLE "HR"."ORDEM_SERVICO" 
   (	"ID_ORDEM_SERVICO" NUMBER(*,0), 
	"ID_CATEGORIA" NUMBER(*,0), 
	"ID_ULT_STATUS_OS" NUMBER
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table SETOR
--------------------------------------------------------

  CREATE TABLE "HR"."SETOR" 
   (	"ID_SETOR" NUMBER(*,0), 
	"DESCRICAO" VARCHAR2(40 BYTE)
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table STATUS
--------------------------------------------------------

  CREATE TABLE "HR"."STATUS" 
   (	"ID_STATUS" NUMBER(*,0), 
	"DESCRICAO" VARCHAR2(40 BYTE)
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table STATUS_OS
--------------------------------------------------------

  CREATE TABLE "HR"."STATUS_OS" 
   (	"ID_STATUS_OS" NUMBER(*,0), 
	"ID_STATUS" NUMBER(*,0), 
	"ID_RESPONSAVEL" NUMBER(*,0), 
	"DESCRICAO" VARCHAR2(255 BYTE), 
	"DATA_ANDAMENTO" DATE, 
	"ID_ORDEM_SERVICO" NUMBER
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table TIPO_USUARIO
--------------------------------------------------------

  CREATE TABLE "HR"."TIPO_USUARIO" 
   (	"ID_TIPO_USUARIO" NUMBER, 
	"DESCRICAO" VARCHAR2(20 BYTE)
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table USUARIO
--------------------------------------------------------

  CREATE TABLE "HR"."USUARIO" 
   (	"ID_USUARIO" NUMBER(*,0), 
	"NOME_COMPLETO" VARCHAR2(60 BYTE), 
	"ID_SETOR" NUMBER(*,0), 
	"LOGIN" VARCHAR2(40 BYTE), 
	"SENHA" VARCHAR2(8 BYTE), 
	"RAMAL" VARCHAR2(4 BYTE), 
	"ID_TIPO_PAPEL" NUMBER, 
	"DATA_CADASTRO" DATE
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS" ;
REM INSERTING into HR.CATEGORIA
SET DEFINE OFF;
Insert into HR.CATEGORIA (ID_CATEGORIA,DESCRICAO) values ('3','Impressora');
Insert into HR.CATEGORIA (ID_CATEGORIA,DESCRICAO) values ('4','Rede');
Insert into HR.CATEGORIA (ID_CATEGORIA,DESCRICAO) values ('1','Mouse');
Insert into HR.CATEGORIA (ID_CATEGORIA,DESCRICAO) values ('2','Sistema');
REM INSERTING into HR.ORDEM_SERVICO
SET DEFINE OFF;
Insert into HR.ORDEM_SERVICO (ID_ORDEM_SERVICO,ID_CATEGORIA,ID_ULT_STATUS_OS) values ('3','3','1');
Insert into HR.ORDEM_SERVICO (ID_ORDEM_SERVICO,ID_CATEGORIA,ID_ULT_STATUS_OS) values ('4','4','1');
Insert into HR.ORDEM_SERVICO (ID_ORDEM_SERVICO,ID_CATEGORIA,ID_ULT_STATUS_OS) values ('5','1','3');
Insert into HR.ORDEM_SERVICO (ID_ORDEM_SERVICO,ID_CATEGORIA,ID_ULT_STATUS_OS) values ('2','2','2');
Insert into HR.ORDEM_SERVICO (ID_ORDEM_SERVICO,ID_CATEGORIA,ID_ULT_STATUS_OS) values ('1','1','6');
REM INSERTING into HR.SETOR
SET DEFINE OFF;
Insert into HR.SETOR (ID_SETOR,DESCRICAO) values ('2','Recursos Humanos');
Insert into HR.SETOR (ID_SETOR,DESCRICAO) values ('3','Jurídico');
Insert into HR.SETOR (ID_SETOR,DESCRICAO) values ('4','Manutenção');
Insert into HR.SETOR (ID_SETOR,DESCRICAO) values ('1','Informática');
REM INSERTING into HR.STATUS
SET DEFINE OFF;
Insert into HR.STATUS (ID_STATUS,DESCRICAO) values ('1','Aberto');
Insert into HR.STATUS (ID_STATUS,DESCRICAO) values ('2','Em Andamento');
Insert into HR.STATUS (ID_STATUS,DESCRICAO) values ('3','Suspensa');
Insert into HR.STATUS (ID_STATUS,DESCRICAO) values ('4','Encerrada');
Insert into HR.STATUS (ID_STATUS,DESCRICAO) values ('5','Cancelada');
REM INSERTING into HR.STATUS_OS
SET DEFINE OFF;
Insert into HR.STATUS_OS (ID_STATUS_OS,ID_STATUS,ID_RESPONSAVEL,DESCRICAO,DATA_ANDAMENTO,ID_ORDEM_SERVICO) values ('1','1','1','Não liga',to_date('19/11/19','DD/MM/RR'),'3');
Insert into HR.STATUS_OS (ID_STATUS_OS,ID_STATUS,ID_RESPONSAVEL,DESCRICAO,DATA_ANDAMENTO,ID_ORDEM_SERVICO) values ('1','1','1','Sem acesso internet',to_date('19/11/19','DD/MM/RR'),'4');
Insert into HR.STATUS_OS (ID_STATUS_OS,ID_STATUS,ID_RESPONSAVEL,DESCRICAO,DATA_ANDAMENTO,ID_ORDEM_SERVICO) values ('1','1','2','Quero novo',to_date('19/11/19','DD/MM/RR'),'5');
Insert into HR.STATUS_OS (ID_STATUS_OS,ID_STATUS,ID_RESPONSAVEL,DESCRICAO,DATA_ANDAMENTO,ID_ORDEM_SERVICO) values ('4','3','1','Testando mouse',to_date('20/11/19','DD/MM/RR'),'1');
Insert into HR.STATUS_OS (ID_STATUS_OS,ID_STATUS,ID_RESPONSAVEL,DESCRICAO,DATA_ANDAMENTO,ID_ORDEM_SERVICO) values ('5','2','1',null,to_date('20/11/19','DD/MM/RR'),'1');
Insert into HR.STATUS_OS (ID_STATUS_OS,ID_STATUS,ID_RESPONSAVEL,DESCRICAO,DATA_ANDAMENTO,ID_ORDEM_SERVICO) values ('6','2','1',null,to_date('20/11/19','DD/MM/RR'),'1');
Insert into HR.STATUS_OS (ID_STATUS_OS,ID_STATUS,ID_RESPONSAVEL,DESCRICAO,DATA_ANDAMENTO,ID_ORDEM_SERVICO) values ('1','1','1','Não entra',to_date('19/11/19','DD/MM/RR'),'2');
Insert into HR.STATUS_OS (ID_STATUS_OS,ID_STATUS,ID_RESPONSAVEL,DESCRICAO,DATA_ANDAMENTO,ID_ORDEM_SERVICO) values ('2','2','1','Deslocando até o local',to_date('19/11/19','DD/MM/RR'),'2');
Insert into HR.STATUS_OS (ID_STATUS_OS,ID_STATUS,ID_RESPONSAVEL,DESCRICAO,DATA_ANDAMENTO,ID_ORDEM_SERVICO) values ('1','1','1','Travou',to_date('19/11/19','DD/MM/RR'),'1');
Insert into HR.STATUS_OS (ID_STATUS_OS,ID_STATUS,ID_RESPONSAVEL,DESCRICAO,DATA_ANDAMENTO,ID_ORDEM_SERVICO) values ('3','3','1','Aguardando fornecedor',to_date('19/11/19','DD/MM/RR'),'5');
REM INSERTING into HR.TIPO_USUARIO
SET DEFINE OFF;
Insert into HR.TIPO_USUARIO (ID_TIPO_USUARIO,DESCRICAO) values ('1','Administrador');
Insert into HR.TIPO_USUARIO (ID_TIPO_USUARIO,DESCRICAO) values ('2','Solicitante');
Insert into HR.TIPO_USUARIO (ID_TIPO_USUARIO,DESCRICAO) values ('3','Atendente');
REM INSERTING into HR.USUARIO
SET DEFINE OFF;
Insert into HR.USUARIO (ID_USUARIO,NOME_COMPLETO,ID_SETOR,LOGIN,SENHA,RAMAL,ID_TIPO_PAPEL,DATA_CADASTRO) values ('1','Cristiano','1','cristiano','123456','4137','3',to_date('07/11/19','DD/MM/RR'));
Insert into HR.USUARIO (ID_USUARIO,NOME_COMPLETO,ID_SETOR,LOGIN,SENHA,RAMAL,ID_TIPO_PAPEL,DATA_CADASTRO) values ('0','Administrador do Sistema','1','admin','123456',null,'1',to_date('21/11/19','DD/MM/RR'));
Insert into HR.USUARIO (ID_USUARIO,NOME_COMPLETO,ID_SETOR,LOGIN,SENHA,RAMAL,ID_TIPO_PAPEL,DATA_CADASTRO) values ('2','Solicitante Externo','3','externo','123456','0298','2',to_date('21/11/19','DD/MM/RR'));
--------------------------------------------------------
--  DDL for Index CATEGORIA_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "HR"."CATEGORIA_PK" ON "HR"."CATEGORIA" ("ID_CATEGORIA") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index STATUS_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "HR"."STATUS_PK" ON "HR"."STATUS" ("ID_STATUS") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SETOR_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "HR"."SETOR_PK" ON "HR"."SETOR" ("ID_SETOR") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index TIPO_USUARIO_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "HR"."TIPO_USUARIO_PK" ON "HR"."TIPO_USUARIO" ("ID_TIPO_USUARIO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index ORDEM_SERVICO_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "HR"."ORDEM_SERVICO_PK" ON "HR"."ORDEM_SERVICO" ("ID_ORDEM_SERVICO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Procedure SECURE_DML
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "HR"."SECURE_DML" 
IS
BEGIN
  IF TO_CHAR (SYSDATE, 'HH24:MI') NOT BETWEEN '08:00' AND '18:00'
        OR TO_CHAR (SYSDATE, 'DY') IN ('SAT', 'SUN') THEN
	RAISE_APPLICATION_ERROR (-20205,
		'You may only make changes during normal office hours');
  END IF;
END secure_dml;

/
--------------------------------------------------------
--  Constraints for Table STATUS
--------------------------------------------------------

  ALTER TABLE "HR"."STATUS" ADD CONSTRAINT "STATUS_PK" PRIMARY KEY ("ID_STATUS")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS"  ENABLE;
 
  ALTER TABLE "HR"."STATUS" MODIFY ("ID_STATUS" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table STATUS_OS
--------------------------------------------------------

  ALTER TABLE "HR"."STATUS_OS" MODIFY ("ID_STATUS_OS" NOT NULL ENABLE);
 
  ALTER TABLE "HR"."STATUS_OS" MODIFY ("ID_STATUS" NOT NULL ENABLE);
 
  ALTER TABLE "HR"."STATUS_OS" MODIFY ("ID_RESPONSAVEL" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table SETOR
--------------------------------------------------------

  ALTER TABLE "HR"."SETOR" ADD CONSTRAINT "SETOR_PK" PRIMARY KEY ("ID_SETOR")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS"  ENABLE;
 
  ALTER TABLE "HR"."SETOR" MODIFY ("ID_SETOR" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table ORDEM_SERVICO
--------------------------------------------------------

  ALTER TABLE "HR"."ORDEM_SERVICO" ADD CONSTRAINT "ORDEM_SERVICO_PK" PRIMARY KEY ("ID_ORDEM_SERVICO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS"  ENABLE;
 
  ALTER TABLE "HR"."ORDEM_SERVICO" MODIFY ("ID_ORDEM_SERVICO" NOT NULL ENABLE);
 
  ALTER TABLE "HR"."ORDEM_SERVICO" MODIFY ("ID_CATEGORIA" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table CATEGORIA
--------------------------------------------------------

  ALTER TABLE "HR"."CATEGORIA" ADD CONSTRAINT "CATEGORIA_PK" PRIMARY KEY ("ID_CATEGORIA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS"  ENABLE;
 
  ALTER TABLE "HR"."CATEGORIA" MODIFY ("ID_CATEGORIA" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table USUARIO
--------------------------------------------------------

  ALTER TABLE "HR"."USUARIO" MODIFY ("ID_USUARIO" NOT NULL ENABLE);
 
  ALTER TABLE "HR"."USUARIO" MODIFY ("NOME_COMPLETO" NOT NULL ENABLE);
 
  ALTER TABLE "HR"."USUARIO" MODIFY ("ID_SETOR" NOT NULL ENABLE);
 
  ALTER TABLE "HR"."USUARIO" MODIFY ("LOGIN" NOT NULL ENABLE);
 
  ALTER TABLE "HR"."USUARIO" MODIFY ("SENHA" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table TIPO_USUARIO
--------------------------------------------------------

  ALTER TABLE "HR"."TIPO_USUARIO" MODIFY ("ID_TIPO_USUARIO" NOT NULL ENABLE);
 
  ALTER TABLE "HR"."TIPO_USUARIO" ADD CONSTRAINT "TIPO_USUARIO_PK" PRIMARY KEY ("ID_TIPO_USUARIO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS"  ENABLE;
